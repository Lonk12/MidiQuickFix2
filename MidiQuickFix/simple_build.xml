<?xml version="1.0" encoding="UTF-8"?>
<project name="MidiQuickFix" default="jar" basedir=".">
    <description>Builds the MidiQuickFix jar file.
    </description>
    
    <target name="init">
        <mkdir dir="build"/>
        <mkdir dir="build/classes"/>
        <mkdir dir="dist"/>
    </target>
    
    <target name="compile" depends="init">
        <javac srcdir="src" destdir="build/classes" source="1.6" target="1.6">
        </javac>
    </target>
    
    <target name="jar" depends="compile" description="Build the jar file.">
        <copy todir="build/classes">
            <fileset includes="**/resources/*" dir="src"/>
            <fileset includes="**/Bundle.properties" dir="src"/>
        </copy>
        <jar jarfile="dist/MidiQuickFix.jar">
            <manifest>
                <attribute name="Main-Class"
                           value="com.lemckes.MidiQuickFix.MidiQuickFix"/>
            </manifest>
            <fileset dir="build/classes"/>
        </jar>
    </target>
    
    <target name="package-src" depends="jar"
            description="Create a release package of the source code">
        <delete dir="release"/>
        <mkdir dir="release/MidiQuickFix"/>
        <copy todir="release/MidiQuickFix">
            <fileset includes="build.xml, manifest.mf, simple_build.xml" dir="."/>
        </copy>
        <mkdir dir="release/MidiQuickFix/nbproject"/>
        <copy todir="release/MidiQuickFix/nbproject">
            <fileset includes="build-impl.xml, project.properties, project.xml" dir="nbproject"/>
        </copy>
        <mkdir dir="release/MidiQuickFix/test/com/lemckes/MidiQuickFix"/>
        <copy todir="release/MidiQuickFix/test/com/lemckes/MidiQuickFix">
            <fileset includes="*java, *form" dir="test/com/lemckes/MidiQuickFix"/>
            <fileset includes="*/*java, */*form" dir="test/com/lemckes/MidiQuickFix"/>
        </copy>
        <mkdir dir="release/MidiQuickFix/src/com/lemckes/MidiQuickFix"/>
        <copy todir="release/MidiQuickFix/src/com/lemckes/MidiQuickFix">
            <fileset includes="*java, *form, *properties" dir="src/com/lemckes/MidiQuickFix"/>
            <fileset includes="*/*java, */*form" dir="src/com/lemckes/MidiQuickFix"/>
            <fileset includes="resources/*properties" dir="src/com/lemckes/MidiQuickFix"/>
            <fileset includes="resources/*gif, resources/*png" dir="src/com/lemckes/MidiQuickFix"/>
        </copy>
        <zip basedir="release" zipfile="MidiQuickFix-src.zip" includes="MidiQuickFix/**">
        </zip>
    </target>
    
    <target name="clean" description="Clean build products.">
        <delete dir="build"/>
        <delete dir="dist"/>
    </target>
    
</project>
